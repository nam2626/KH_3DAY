<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carousel</title>
  <style>
    :root {
      --ring: rgba(59,130,246,.5);
      --muted: #94a3b8;
      --white: #ffffff;
      --panel: #111827;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; background: #0f172a; color: var(--white); font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }

    .container { max-width: 960px; margin: 40px auto; padding: 0 16px; }
    h1 { font-size: 20px; margin: 0 0 16px; color: var(--white); font-weight: 600; }
    .hint { color: var(--muted); font-size: 14px; margin: 8px 0 20px; }

    .carousel { position: relative; width: 100%; aspect-ratio: 16 / 9; background: var(--panel); border-radius: 14px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,.35); }
    .slides { display: flex; height: 100%; transform: translateX(0); transition: transform .5s ease; }
    .slide { min-width: 100%; height: 100%; user-select: none; }
    .slide img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,.35); border: none; color: #fff; width: 44px; height: 44px; border-radius: 999px; display: grid; place-items: center; cursor: pointer; backdrop-filter: blur(4px); }
    .nav:hover { background: rgba(0,0,0,.5); }
    .nav:focus { outline: 2px solid var(--ring); outline-offset: 2px; }
    .nav img { width: 22px; height: 22px; filter: drop-shadow(0 1px 1px rgba(0,0,0,.4)); pointer-events: none; }
    .nav.prev { left: 10px; }
    .nav.next { right: 10px; }

    .indicators { position: absolute; left: 50%; bottom: 12px; transform: translateX(-50%); display: flex; gap: 8px; padding: 6px 10px; background: rgba(0,0,0,.25); border-radius: 999px; backdrop-filter: blur(4px); }
    .dot { width: 10px; height: 10px; border-radius: 999px; border: 0; background: rgba(255,255,255,.5); cursor: pointer; padding: 0; }
    .dot[aria-current="true"] { background: #fff; width: 20px; border-radius: 999px; transition: width .25s ease; }
  </style>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const root = document.getElementById('carousel');
      const slidesWrap = root.querySelector('.slides');
      const slides = Array.from(root.querySelectorAll('.slide'));
      const prevBtn = root.querySelector('.nav.prev');
      const nextBtn = root.querySelector('.nav.next');
      const indicators = root.querySelector('.indicators');

      let current = 0;
      const intervalMs = 3000;
      let autoplayId = null;

      function renderIndicators() {
        indicators.innerHTML = '';
        slides.forEach((_, i) => {
          const btn = document.createElement('button');
          btn.className = 'dot';
          btn.type = 'button';
          btn.setAttribute('aria-label', `슬라이드 ${i + 1}`);
          btn.setAttribute('aria-current', String(i === current));
          btn.addEventListener('click', () => {
            stopAutoplay();
            goTo(i);
          });
          indicators.appendChild(btn);
        });
      }

      function updateIndicators() {
        const dots = Array.from(indicators.querySelectorAll('.dot'));
        dots.forEach((d, i) => d.setAttribute('aria-current', String(i === current)));
      }

      function goTo(index) {
        current = (index + slides.length) % slides.length;
        slidesWrap.style.transform = `translateX(-${current * 100}%)`;
        updateIndicators();
      }

      function next() { goTo(current + 1); }
      function prev() { goTo(current - 1); }

      function startAutoplay() {
        if (autoplayId) return;
        autoplayId = setInterval(() => { next(); }, intervalMs);
      }
      function stopAutoplay() {
        if (!autoplayId) return;
        clearInterval(autoplayId);
        autoplayId = null;
      }

      // 초기 렌더
      renderIndicators();
      goTo(0);
      startAutoplay();

      // 이벤트 바인딩
      nextBtn.addEventListener('click', () => { stopAutoplay(); next(); });
      prevBtn.addEventListener('click', () => { stopAutoplay(); prev(); });
      slidesWrap.addEventListener('click', () => { stopAutoplay(); });

      // 키보드 접근성
      root.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight') { stopAutoplay(); next(); }
        if (e.key === 'ArrowLeft')  { stopAutoplay(); prev(); }
      });
    });
  </script>
</head>
<body>
  <div class="container">
    <h1>이미지 캐러셀</h1>
    <p class="hint">- 인디케이터/화살표로 이동합니다. 이미지를 클릭하거나 화살표를 누르면 자동 회전이 정지됩니다.</p>

    <div class="carousel" id="carousel" tabindex="0" aria-roledescription="carousel" aria-label="프로모션 배너">
      <div class="slides" aria-live="polite">
        <div class="slide"><img src="img/main_1.webp" alt="메인 배너 1" /></div>
        <div class="slide"><img src="img/main_2.webp" alt="메인 배너 2" /></div>
        <div class="slide"><img src="img/main_3.webp" alt="메인 배너 3" /></div>
        <div class="slide"><img src="img/main_4.webp" alt="메인 배너 4" /></div>
      </div>

      <button class="nav prev" type="button" aria-label="이전">
        <img src="img/left_arrow.png" alt="이전" />
      </button>
      <button class="nav next" type="button" aria-label="다음">
        <img src="img/right_arrow.png" alt="다음" />
      </button>

      <div class="indicators" role="tablist" aria-label="슬라이드 인디케이터"></div>
    </div>
  </div>
</body>
</html>